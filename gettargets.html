<!DOCTYPE html>
<html lang="es">
<head>
    <meta charset="UTF-8">
    <title>Tarjetas con LocalStorage</title>
    <style>
        body { font-family: 'Segoe UI', sans-serif; display: flex; flex-direction: column; align-items: center; background-color: #f0f2f5; padding: 20px; }
        
        #card-form { background: white; padding: 20px; border-radius: 12px; box-shadow: 0 4px 12px rgba(0,0,0,0.1); margin-bottom: 30px; width: 320px; }
        input { display: block; margin: 10px 0; padding: 10px; width: 100%; border: 1px solid #ccc; border-radius: 6px; box-sizing: border-box; }
        
        .buttons-container { display: flex; gap: 10px; }
        .btn-add { background: #007bff; color: white; border: none; padding: 10px; border-radius: 6px; flex: 2; cursor: pointer; font-weight: bold; }
        .btn-clear { background: #dc3545; color: white; border: none; padding: 10px; border-radius: 6px; flex: 1; cursor: pointer; }

        #display-area { display: flex; flex-wrap: wrap; gap: 20px; justify-content: center; width: 100%; }

        /* Estilo de la Tarjeta */
        .card { background: white; width: 200px; border-radius: 10px; overflow: hidden; box-shadow: 0 4px 8px rgba(0,0,0,0.1); text-align: center; padding-bottom: 15px; position: relative; }
        .card img { width: 100%; height: 130px; object-fit: cover; background: #eee; }
        .card h3 { margin: 10px 0 5px 0; font-size: 1.1em; }
        .card p { color: #666; font-size: 0.85em; margin: 0; }
    </style>
</head>
<body onload="loadCards()">

    <h2>Gestor de Tarjetas (Riwi Storage)</h2>
    
    <div id="card-form">
        <input type="text" id="name" placeholder="Nombre completo">
        <input type="text" id="role" placeholder="Puesto / Título">
        <input type="text" id="imgUrl" placeholder="URL de la imagen">
        <div class="buttons-container">
        <button class="btn-add" onclick="saveAndCreate()">Guardar y Crear</button>
        <button class="btn-clear" onclick="clearStorage()">Borrar Todo</button>
        </div>
    </div>

    <div id="display-area"></div>

    <script>
        // Función para cargar tarjetas desde LocalStorage al iniciar
        function loadCards() {
            const displayArea = document.getElementById('display-area');
            displayArea.innerHTML = ''; // Limpiar pantalla

            // Obtener datos (si no hay nada, devuelve un arreglo vacío)
            const cards = JSON.parse(localStorage.getItem('myCards')) || [];

            cards.forEach(cardData => {
                renderCard(cardData);
            });
        }

        // Función para guardar una nueva tarjeta
        function saveAndCreate() {
            const name = document.getElementById('name').value;
            const role = document.getElementById('role').value;
            const imgUrl = document.getElementById('imgUrl').value;

            if (!name || !role || !imgUrl) return alert("Llena todos los campos");

            const newCard = { name, role, imgUrl };

            // 1. Obtener lo que ya existe en LocalStorage
            const cards = JSON.parse(localStorage.getItem('myCards')) || [];
            
            // 2. Agregar la nueva tarjeta al arreglo
            cards.push(newCard);
            
            // 3. Guardar de nuevo en LocalStorage (convertido a String)
            localStorage.setItem('myCards', JSON.stringify(cards));

            // 4. Dibujarla en pantalla y limpiar formulario
            renderCard(newCard);
            document.querySelectorAll('input').forEach(i => i.value = '');
        }

        // Función que solo se encarga de dibujar el HTML de la tarjeta
        function renderCard(data) {
            const displayArea = document.getElementById('display-area');
            const card = document.createElement('div');
            card.className = 'card';
            card.innerHTML = `
                <img src="${data.imgUrl}" alt="${data.name}" onerror="this.src='https://via.placeholder.com/150'">
                <h3>${data.name}</h3>
                <p>${data.role}</p>
            `;
            displayArea.appendChild(card);
        }

        // Función para borrar todo el storage
        function clearStorage() {
            if(confirm("¿Seguro que quieres borrar todas las tarjetas?")) {
                localStorage.removeItem('myCards');
                loadCards();
            }
        }
    </script>

</body>
</html>